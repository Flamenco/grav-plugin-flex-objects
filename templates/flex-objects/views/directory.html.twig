{# flex-objects/views/directory.html.twig #}

{% set flex = grav.get('flex_objects') %}
{% set directory = flex.directory(type) %}

{% if directory %}
    {% set layout = options.layout ?? 'default' %}
    {% set context = options ?? {} %}
    {% set type = directory.flexType() %}
    {% set collection = directory.collection %}

    {% render collection layout: layout with context %}

{% else %}
    {% include 'flex-objects/views/404.html.twig' %}
{% endif %}
